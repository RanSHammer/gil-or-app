<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>Gil & Or ‚Äî Morning & Evening</title>
  <link href="https://fonts.googleapis.com/css2?family=Bangers&family=Quicksand:wght@500;600;700&display=swap" rel="stylesheet">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: 'Quicksand', sans-serif;
      min-height: 100vh;
      overflow-x: hidden;
      background: #0a0a1a;
      color: #fff;
    }

    /* ===== ANIMATED BACKGROUNDS ===== */
    .bg-layer {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      pointer-events: none; z-index: 0;
    }

    /* Default/welcome bg */
    .bg-welcome {
      background:
        radial-gradient(ellipse at 30% 20%, rgba(138, 43, 226, 0.4) 0%, transparent 50%),
        radial-gradient(ellipse at 70% 80%, rgba(255, 107, 107, 0.3) 0%, transparent 50%),
        radial-gradient(ellipse at 50% 50%, rgba(255, 215, 0, 0.1) 0%, transparent 60%),
        #0a0a1a;
    }

    .bg-morning {
      background:
        radial-gradient(ellipse at 50% 0%, rgba(255, 200, 50, 0.6) 0%, transparent 60%),
        radial-gradient(ellipse at 20% 80%, rgba(255, 120, 50, 0.3) 0%, transparent 50%),
        linear-gradient(to bottom, #1a0a00 0%, #2d1800 30%, #4a2000 60%, #ff6b00 150%);
    }

    .bg-evening {
      background:
        radial-gradient(ellipse at 50% 0%, rgba(100, 100, 255, 0.3) 0%, transparent 50%),
        radial-gradient(ellipse at 30% 70%, rgba(138, 43, 226, 0.4) 0%, transparent 50%),
        linear-gradient(to bottom, #000020 0%, #0a0a3a 40%, #1a1a5a 100%);
    }

    /* Floating particles */
    .particles {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      pointer-events: none; z-index: 1; overflow: hidden;
    }

    .particle {
      position: absolute;
      border-radius: 50%;
      animation: floatUp linear infinite;
      opacity: 0;
    }

    @keyframes floatUp {
      0% { transform: translateY(100vh) scale(0); opacity: 0; }
      10% { opacity: 1; }
      90% { opacity: 0.8; }
      100% { transform: translateY(-20vh) scale(1); opacity: 0; }
    }

    /* Lightning flash */
    .lightning-flash {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      background: rgba(255, 255, 255, 0.9);
      pointer-events: none; z-index: 200;
      opacity: 0;
      transition: opacity 0.05s;
    }

    .lightning-flash.active {
      animation: flash 0.3s ease-out;
    }

    @keyframes flash {
      0% { opacity: 0.8; }
      20% { opacity: 0; }
      40% { opacity: 0.5; }
      60% { opacity: 0; }
      80% { opacity: 0.2; }
      100% { opacity: 0; }
    }

    /* ===== CONTAINER ===== */
    .container {
      position: relative; z-index: 10;
      max-width: 500px; margin: 0 auto; padding: 20px;
      min-height: 100vh;
      display: flex; flex-direction: column; align-items: center; justify-content: center;
    }

    .screen { width: 100%; animation: screenIn 0.6s ease; }
    .hidden { display: none !important; }

    @keyframes screenIn {
      from { opacity: 0; transform: scale(0.9) translateY(30px); }
      to { opacity: 1; transform: scale(1) translateY(0); }
    }

    /* ===== WELCOME SCREEN ===== */
    .hero-title {
      font-family: 'Bangers', cursive;
      font-size: 3.5rem;
      text-align: center;
      letter-spacing: 4px;
      background: linear-gradient(135deg, #ffd700 0%, #ff6b6b 30%, #ff4500 60%, #ffd700 100%);
      background-size: 200% 200%;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      animation: shimmer 3s ease-in-out infinite;
      text-shadow: none;
      filter: drop-shadow(0 0 20px rgba(255, 107, 0, 0.5));
      margin-bottom: 5px;
    }

    @keyframes shimmer {
      0%, 100% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
    }

    .hero-sub {
      font-family: 'Bangers', cursive;
      font-size: 1.4rem;
      text-align: center;
      color: rgba(255, 255, 255, 0.7);
      letter-spacing: 6px;
      margin-bottom: 30px;
    }

    /* Floating character showcase */
    .char-showcase {
      position: relative;
      height: 200px;
      width: 100%;
      margin-bottom: 30px;
      overflow: visible;
    }

    .char-float {
      position: absolute;
      border-radius: 50%;
      overflow: hidden;
      border: 3px solid rgba(255, 215, 0, 0.5);
      box-shadow: 0 0 20px rgba(255, 107, 0, 0.3), 0 0 40px rgba(138, 43, 226, 0.2);
      animation: heroFloat 4s ease-in-out infinite;
    }

    .char-float img {
      width: 100%; height: 100%; object-fit: cover; object-position: top;
    }

    .cf1 { width: 70px; height: 70px; top: 10px; left: 5%; animation-delay: 0s; }
    .cf2 { width: 90px; height: 90px; top: 50px; left: 25%; animation-delay: -1s; }
    .cf3 { width: 110px; height: 110px; top: 30px; left: 45%; animation-delay: -2s; z-index: 2; border-color: rgba(255, 68, 68, 0.6); }
    .cf4 { width: 80px; height: 80px; top: 60px; left: 68%; animation-delay: -0.5s; }
    .cf5 { width: 65px; height: 65px; top: 15px; left: 85%; animation-delay: -1.5s; }
    .cf6 { width: 75px; height: 75px; top: 120px; left: 15%; animation-delay: -3s; }
    .cf7 { width: 85px; height: 85px; top: 110px; left: 55%; animation-delay: -2.5s; }
    .cf8 { width: 60px; height: 60px; top: 130px; left: 80%; animation-delay: -0.8s; }

    @keyframes heroFloat {
      0%, 100% { transform: translateY(0) rotate(0deg); }
      25% { transform: translateY(-12px) rotate(2deg); }
      75% { transform: translateY(8px) rotate(-2deg); }
    }

    /* Choice section */
    .section-title {
      font-family: 'Bangers', cursive;
      font-size: 1.5rem;
      text-align: center;
      color: #ffd700;
      letter-spacing: 3px;
      margin-bottom: 15px;
    }

    .choice-row {
      display: flex; gap: 15px; justify-content: center; margin-bottom: 30px;
    }

    .choice-btn {
      width: 140px; padding: 20px 15px;
      border-radius: 20px;
      border: 2px solid rgba(255, 215, 0, 0.3);
      background: rgba(255, 255, 255, 0.08);
      backdrop-filter: blur(10px);
      cursor: pointer; transition: all 0.3s;
      text-align: center;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
    }

    .choice-btn:hover {
      transform: translateY(-5px);
      border-color: rgba(255, 215, 0, 0.6);
      box-shadow: 0 12px 40px rgba(255, 107, 0, 0.2);
    }

    .choice-btn.selected {
      border-color: #ff4500;
      background: rgba(255, 69, 0, 0.2);
      box-shadow: 0 0 30px rgba(255, 69, 0, 0.3);
      transform: translateY(-5px);
    }

    .choice-emoji { font-size: 2.8rem; margin-bottom: 8px; }
    .choice-text { font-size: 1.1rem; font-weight: 700; color: #fff; }

    .go-btn {
      width: 100%; max-width: 280px;
      padding: 18px;
      border: none; border-radius: 50px;
      font-family: 'Bangers', cursive;
      font-size: 1.8rem;
      letter-spacing: 4px;
      color: #000;
      cursor: pointer; transition: all 0.3s;
      background: linear-gradient(135deg, #ffd700, #ff6b00);
      box-shadow: 0 0 30px rgba(255, 107, 0, 0.5), 0 8px 20px rgba(0, 0, 0, 0.3);
      position: relative; overflow: hidden;
    }

    .go-btn::after {
      content: ''; position: absolute; top: -50%; left: -50%;
      width: 200%; height: 200%;
      background: linear-gradient(45deg, transparent, rgba(255,255,255,0.3), transparent);
      transform: rotate(45deg);
      animation: btnShine 3s ease-in-out infinite;
    }

    @keyframes btnShine {
      0%, 100% { transform: translateX(-100%) rotate(45deg); }
      50% { transform: translateX(100%) rotate(45deg); }
    }

    .go-btn:hover { transform: translateY(-4px); box-shadow: 0 0 50px rgba(255, 107, 0, 0.7); }
    .go-btn:disabled { opacity: 0.3; cursor: not-allowed; transform: none; }

    /* ===== TASKS SCREEN ===== */
    .tasks-header { text-align: center; margin-bottom: 20px; }

    .tasks-name {
      font-family: 'Bangers', cursive;
      font-size: 2.5rem;
      letter-spacing: 3px;
    }

    .tasks-name.morning-text {
      background: linear-gradient(135deg, #ffd700, #ff6b00);
      -webkit-background-clip: text; -webkit-text-fill-color: transparent;
      filter: drop-shadow(0 0 10px rgba(255, 150, 0, 0.5));
    }

    .tasks-name.evening-text {
      background: linear-gradient(135deg, #7b68ee, #00bfff);
      -webkit-background-clip: text; -webkit-text-fill-color: transparent;
      filter: drop-shadow(0 0 10px rgba(100, 100, 255, 0.5));
    }

    .tasks-label {
      font-size: 1rem;
      color: rgba(255,255,255,0.6);
      letter-spacing: 2px;
    }

    .progress-wrap {
      background: rgba(255,255,255,0.1);
      border-radius: 20px; height: 14px;
      margin: 15px 0 25px;
      overflow: hidden;
      border: 1px solid rgba(255,255,255,0.1);
    }

    .progress-bar {
      height: 100%; border-radius: 20px;
      transition: width 0.5s ease;
      background: linear-gradient(90deg, #ff4500, #ffd700, #ff4500);
      background-size: 200% 100%;
      animation: progressShimmer 2s linear infinite;
    }

    .progress-bar.evening-bar {
      background: linear-gradient(90deg, #7b68ee, #00bfff, #7b68ee);
      background-size: 200% 100%;
    }

    @keyframes progressShimmer {
      0% { background-position: 0% 50%; }
      100% { background-position: 200% 50%; }
    }

    .task-list { display: flex; flex-direction: column; gap: 10px; }

    .task-item {
      display: flex; align-items: center; gap: 12px;
      padding: 16px 18px;
      border-radius: 16px;
      border: 2px solid rgba(255,255,255,0.1);
      background: rgba(255,255,255,0.05);
      backdrop-filter: blur(5px);
      cursor: pointer; transition: all 0.3s;
      -webkit-tap-highlight-color: transparent;
    }

    .task-item:hover { border-color: rgba(255,215,0,0.3); transform: translateX(5px); }
    .task-item:active { transform: scale(0.97); }

    .task-item.done {
      border-color: #4caf50;
      background: rgba(76, 175, 80, 0.15);
    }

    .task-item.done .task-name { text-decoration: line-through; color: rgba(255,255,255,0.4); }

    .task-check {
      width: 34px; height: 34px; border-radius: 50%;
      background: rgba(255,255,255,0.1);
      border: 2px solid rgba(255,255,255,0.3);
      display: flex; align-items: center; justify-content: center;
      font-size: 1.1rem; flex-shrink: 0; transition: all 0.3s;
    }

    .task-item.done .task-check {
      background: #4caf50; border-color: #4caf50; color: #fff;
      box-shadow: 0 0 15px rgba(76, 175, 80, 0.5);
    }

    .task-icon { font-size: 1.5rem; flex-shrink: 0; }
    .task-name { font-size: 1.05rem; font-weight: 600; flex: 1; }

    .back-btn {
      margin-top: 20px;
      background: none; border: 1px solid rgba(255,255,255,0.2);
      color: rgba(255,255,255,0.5); padding: 10px 25px; border-radius: 50px;
      font-family: 'Quicksand', sans-serif; font-size: 0.9rem; font-weight: 600;
      cursor: pointer; transition: all 0.3s;
    }
    .back-btn:hover { border-color: rgba(255,255,255,0.5); color: #fff; }

    /* ===== REWARD SCREEN ===== */
    .reward-screen { text-align: center; }

    .reward-explosion {
      font-size: 3rem; margin-bottom: 10px;
      animation: explosionPulse 1s ease-in-out infinite;
    }

    @keyframes explosionPulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.15); }
    }

    .reward-headline {
      font-family: 'Bangers', cursive;
      font-size: 2.8rem;
      letter-spacing: 4px;
      background: linear-gradient(135deg, #ffd700, #ff4500, #ff0, #ff6b00);
      background-size: 300% 300%;
      -webkit-background-clip: text; -webkit-text-fill-color: transparent;
      animation: shimmer 2s ease-in-out infinite;
      margin-bottom: 5px;
    }

    .reward-sub {
      font-size: 1.1rem; color: rgba(255,255,255,0.7); margin-bottom: 25px;
    }

    .reward-card {
      background: rgba(20, 20, 40, 0.9);
      border: 2px solid rgba(255, 215, 0, 0.4);
      border-radius: 28px; padding: 30px 25px;
      box-shadow: 0 0 60px rgba(255, 107, 0, 0.2), 0 20px 60px rgba(0,0,0,0.5);
      animation: cardDrop 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
      position: relative; overflow: hidden;
    }

    .reward-card::before {
      content: ''; position: absolute; top: -2px; left: -2px; right: -2px; bottom: -2px;
      background: linear-gradient(45deg, #ff4500, #ffd700, #7b68ee, #ff4500);
      background-size: 400% 400%;
      border-radius: 28px; z-index: -1;
      animation: borderGlow 4s ease infinite;
    }

    @keyframes borderGlow {
      0%, 100% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
    }

    @keyframes cardDrop {
      0% { opacity: 0; transform: translateY(-60px) scale(0.7) rotate(-5deg); }
      100% { opacity: 1; transform: translateY(0) scale(1) rotate(0); }
    }

    .reward-img-wrap {
      width: 150px; height: 150px; margin: 0 auto 15px;
      border-radius: 50%; padding: 4px;
      background: linear-gradient(135deg, #ffd700, #ff4500, #7b68ee);
      box-shadow: 0 0 30px rgba(255, 107, 0, 0.4);
      animation: imgGlow 2s ease-in-out infinite alternate;
    }

    @keyframes imgGlow {
      0% { box-shadow: 0 0 30px rgba(255, 107, 0, 0.4); }
      100% { box-shadow: 0 0 50px rgba(255, 215, 0, 0.6), 0 0 80px rgba(138, 43, 226, 0.3); }
    }

    .reward-img {
      width: 100%; height: 100%; border-radius: 50%;
      object-fit: cover; object-position: top; background: #111;
    }

    .reward-fallback {
      width: 100%; height: 100%; border-radius: 50%;
      display: flex; align-items: center; justify-content: center;
      font-size: 4rem; background: #111;
    }

    .reward-universe-badge {
      display: inline-block; padding: 4px 16px;
      background: rgba(123, 104, 238, 0.25);
      border: 1px solid rgba(123, 104, 238, 0.5);
      border-radius: 20px; font-size: 0.75rem; font-weight: 700;
      color: #b8a9ff; letter-spacing: 2px; margin-bottom: 10px;
    }

    .reward-name {
      font-family: 'Bangers', cursive;
      font-size: 2rem; letter-spacing: 3px;
      color: #ffd700; margin-bottom: 15px;
    }

    .reward-msg {
      font-size: 1.05rem; color: rgba(255,255,255,0.85);
      line-height: 1.7; font-style: italic;
      padding: 15px 18px;
      background: rgba(255, 215, 0, 0.08);
      border-radius: 16px;
      border-left: 4px solid #ffd700;
    }

    .reward-btns {
      display: flex; gap: 12px; justify-content: center; margin-top: 25px; flex-wrap: wrap;
    }

    .reward-btn {
      padding: 14px 30px; border: none; border-radius: 50px;
      font-family: 'Bangers', cursive; font-size: 1.2rem; letter-spacing: 2px;
      cursor: pointer; transition: all 0.3s;
    }

    .reward-btn.again { background: linear-gradient(135deg, #7b68ee, #667eea); color: #fff; }
    .reward-btn.home { background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.3); color: #fff; }
    .reward-btn:hover { transform: translateY(-3px); }

    /* ===== CONFETTI ===== */
    .confetti-container {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      pointer-events: none; z-index: 150; overflow: hidden;
    }

    .confetti-piece {
      position: absolute; top: -10%;
      animation: confettiFall linear forwards;
    }

    @keyframes confettiFall {
      0% { top: -10%; opacity: 1; transform: rotate(0deg) translateX(0); }
      100% { top: 110%; opacity: 0; transform: rotate(720deg) translateX(50px); }
    }

    /* Energy burst on task complete */
    @keyframes energyBurst {
      0% { box-shadow: 0 0 0 0 rgba(76, 175, 80, 0.6); }
      100% { box-shadow: 0 0 0 20px rgba(76, 175, 80, 0); }
    }

    .task-item.just-done { animation: energyBurst 0.5s ease-out; }

    /* Mobile */
    @media (max-width: 400px) {
      .hero-title { font-size: 2.8rem; }
      .char-float { transform: scale(0.8); }
      .cf5, .cf8 { display: none; }
    }
  </style>
</head>
<body>
  <div class="bg-layer bg-welcome" id="bg-layer"></div>
  <div class="particles" id="particles"></div>
  <div class="lightning-flash" id="lightning"></div>
  <div class="confetti-container" id="confetti"></div>

  <div class="container">

    <!-- WELCOME -->
    <div id="welcome" class="screen">
      <div class="hero-title">GIL & OR</div>
      <div class="hero-sub">MORNING & EVENING</div>

      <div class="char-showcase">
        <div class="char-float cf1"><img src="images/goku.avif" alt=""></div>
        <div class="char-float cf2"><img src="images/vader.jpg" alt=""></div>
        <div class="char-float cf3"><img src="images/thor.jpeg" alt=""></div>
        <div class="char-float cf4"><img src="images/gandalf.jpeg" alt=""></div>
        <div class="char-float cf5"><img src="images/loki.jpeg" alt=""></div>
        <div class="char-float cf6"><img src="images/harry.jpeg" alt=""></div>
        <div class="char-float cf7"><img src="images/thanos.webp" alt=""></div>
        <div class="char-float cf8"><img src="images/frieza.webp" alt=""></div>
      </div>

      <div class="section-title">‚ö° WHO ARE YOU? ‚ö°</div>
      <div class="choice-row">
        <button class="choice-btn" onclick="pick('person','Gil')" id="btn-gil">
          <div class="choice-emoji">ü¶∏‚Äç‚ôÇÔ∏è</div>
          <div class="choice-text">GIL</div>
        </button>
        <button class="choice-btn" onclick="pick('person','Or')" id="btn-or">
          <div class="choice-emoji">ü¶π‚Äç‚ôÇÔ∏è</div>
          <div class="choice-text">OR</div>
        </button>
      </div>

      <div class="section-title">üî• WHAT TIME IS IT? üî•</div>
      <div class="choice-row">
        <button class="choice-btn" onclick="pick('time','morning')" id="btn-morning">
          <div class="choice-emoji">‚òÄÔ∏è</div>
          <div class="choice-text">MORNING</div>
        </button>
        <button class="choice-btn" onclick="pick('time','evening')" id="btn-evening">
          <div class="choice-emoji">üåô</div>
          <div class="choice-text">EVENING</div>
        </button>
      </div>

      <button class="go-btn" id="go-btn" onclick="startTasks()" disabled>LET'S GO! üöÄ</button>
    </div>

    <!-- TASKS -->
    <div id="tasks" class="screen hidden">
      <div class="tasks-header">
        <div class="tasks-name" id="tasks-name"></div>
        <div class="tasks-label" id="tasks-label"></div>
      </div>
      <div class="progress-wrap">
        <div class="progress-bar" id="progress-bar" style="width:0%"></div>
      </div>
      <div class="task-list" id="task-list"></div>
      <button class="back-btn" onclick="goHome()">‚Üê BACK</button>
    </div>

    <!-- REWARD -->
    <div id="reward" class="screen reward-screen hidden">
      <div class="reward-explosion">üí•‚ö°üî•‚ö°üí•</div>
      <div class="reward-headline" id="reward-headline"></div>
      <div class="reward-sub" id="reward-sub"></div>
      <div class="reward-card">
        <div class="reward-img-wrap">
          <img id="r-img" class="reward-img" src="" alt=""
               onerror="this.style.display='none';document.getElementById('r-fb').style.display='flex';">
          <div id="r-fb" class="reward-fallback" style="display:none;"></div>
        </div>
        <div id="r-universe" class="reward-universe-badge"></div>
        <div id="r-name" class="reward-name"></div>
        <div id="r-msg" class="reward-msg"></div>
      </div>
      <div class="reward-btns">
        <button class="reward-btn again" onclick="newChar()">üé≤ NEW CHARACTER</button>
        <button class="reward-btn home" onclick="goHome()">üè† HOME</button>
      </div>
    </div>

  </div>

  <script>
    // ===== TASKS =====
    const TASKS = {
      morning: [
        { icon: 'üò¥', name: 'Wake Up' },
        { icon: 'üöΩ', name: 'Pee' },
        { icon: 'ü•£', name: 'Eat Breakfast' },
        { icon: 'ü§´', name: 'Quiet Play Time' },
        { icon: 'üëï', name: 'Get Dressed' },
        { icon: 'ü™•', name: 'Brush Your Teeth' },
        { icon: 'üß¥', name: 'Water Bottle & Packed Meal' },
        { icon: 'üëü', name: 'Shoes On!' }
      ],
      evening: [
        { icon: 'üçΩÔ∏è', name: 'Eat Dinner' },
        { icon: 'üöø', name: 'Shower' },
        { icon: 'ü©≥', name: 'Wear Pyjamas' },
        { icon: 'üíß', name: 'Fill Cold Water Bottle' },
        { icon: 'üìñ', name: 'Read Bedtime Stories' },
        { icon: 'üè¥‚Äç‚ò†Ô∏è', name: 'Read Treasure Island' },
        { icon: 'üíç', name: 'Read Lord of the Rings' }
      ]
    };

    // ===== CHARACTERS =====
    const CHARS = [
      { name:'Gandalf', u:'Lord of the Rings', img:'images/gandalf.jpeg', ic:'üßô',
        m:{ morning:"A wizard is never late ‚Äî and neither are you! Off you go!", evening:"Rest now. Even the greatest adventurers need sleep." }},
      { name:'Frodo', u:'Lord of the Rings', img:'images/frodo.png', ic:'üßù',
        m:{ morning:"Even the smallest person can have the best morning routine!", evening:"The hardest part of the day is done. Rest well, friend." }},
      { name:'Aragorn', u:'Lord of the Rings', img:'images/aragorn.jpg', ic:'‚öîÔ∏è',
        m:{ morning:"You've shown the strength of a true king! Go conquer the day!", evening:"A warrior rests before the next battle. Sleep well, champion." }},
      { name:'Samwise', u:'Lord of the Rings', img:'images/sam.jpeg', ic:'üå±',
        m:{ morning:"Nothing like a good breakfast and a fresh start! Well done!", evening:"That's everything done, and done proper. Time for sleep!" }},
      { name:'Legolas', u:'Lord of the Rings', img:'images/legolas.jpeg', ic:'üèπ',
        m:{ morning:"Your precision this morning would make even an Elf proud!", evening:"The stars are out. You've done well. Rest under their light." }},
      { name:'Harry Potter', u:'Harry Potter', img:'images/harry.jpeg', ic:'‚ö°',
        m:{ morning:"Brilliant! Even I wasn't this organised at Hogwarts!", evening:"Mischief managed! Now off to sleep ‚Äî no sneaking around!" }},
      { name:'Hermione', u:'Harry Potter', img:'images/hermione.jpeg', ic:'üìö',
        m:{ morning:"Full marks! Every single task completed. I'm impressed!", evening:"Bedtime reading AND routine done? Top of the class!" }},
      { name:'Ron Weasley', u:'Harry Potter', img:'images/ron.jpeg', ic:'‚ôüÔ∏è',
        m:{ morning:"Blimey! You finished everything? Even I struggle with that!", evening:"All done? Wicked! Now sleep before Mum starts shouting." }},
      { name:'Dumbledore', u:'Harry Potter', img:'images/dumbledore.jpeg', ic:'‚ú®',
        m:{ morning:"It is our choices that show what we truly are. You chose brilliantly!", evening:"Happiness can be found even in finishing your bedtime routine!" }},
      { name:'Luna Lovegood', u:'Harry Potter', img:'images/luna.jpeg', ic:'üåô',
        m:{ morning:"You're quite extraordinary! Most people can't even find their shoes!", evening:"The Nargles won't bother you tonight. Everything's perfect." }},
      { name:'Tony Stark', u:'Marvel', img:'images/tony.jpeg', ic:'üî¥',
        m:{ morning:"Not bad, kid. I'd have done it faster, but still ‚Äî impressive.", evening:"JARVIS, log it: all tasks complete. This kid's going places." }},
      { name:'Steve Rogers', u:'Marvel', img:'images/steve.jpeg', ic:'üõ°Ô∏è',
        m:{ morning:"I could do this all day ‚Äî but you already finished! Real discipline.", evening:"You did the right thing, every step. Rest up, soldier." }},
      { name:'Thor', u:'Marvel', img:'images/thor.jpeg', ic:'‚ö°',
        m:{ morning:"By Odin's beard! You are WORTHY! Go forth, champion!", evening:"Another glorious evening conquered! Even Asgardians need beauty sleep." }},
      { name:'Spider-Man', u:'Marvel', img:'images/spiderman.jpeg', ic:'üï∑Ô∏è',
        m:{ morning:"With great morning routines come great days! You nailed it!", evening:"All done! Get some rest ‚Äî being awesome takes energy, trust me." }},
      { name:'Hulk', u:'Marvel', img:'images/hulk.webp', ic:'üíö',
        m:{ morning:"HULK IMPRESSED! You SMASH morning routine! HULK PROUD!", evening:"Hulk say... good job. Now sleep. Even Hulk sleeps sometimes." }},
      { name:'Goku', u:'Dragon Ball', img:'images/goku.avif', ic:'üí•',
        m:{ morning:"Awesome! You powered up like a Super Saiyan! Let's gooo!", evening:"All tasks done? Rest up so you can train even harder tomorrow!" }},
      { name:'Vegeta', u:'Dragon Ball', img:'images/vegeta.jpeg', ic:'üëä',
        m:{ morning:"Hmph. Acceptable. Discipline worthy of a Saiyan prince.", evening:"You completed everything? ...Fine. That was impressive." }},
      { name:'Piccolo', u:'Dragon Ball', img:'images/piccolo.jpeg', ic:'üßò',
        m:{ morning:"Good. Discipline builds strength. You trained well this morning.", evening:"All tasks done. Meditate on today's victories and rest." }},
      { name:'Gohan', u:'Dragon Ball', img:'images/gohan.jpeg', ic:'üìñ',
        m:{ morning:"You did it! Even my mum would be impressed, and she's strict!", evening:"Reading AND routine done? Super Saiyan scholar!" }},
      { name:'Luke Skywalker', u:'Star Wars', img:'images/luke.jpeg', ic:'‚ú®',
        m:{ morning:"The Force is strong with you this morning! I can feel it!", evening:"You've done well, young one. Tomorrow's adventure awaits." }},
      { name:'Leia Organa', u:'Star Wars', img:'images/leia.jpeg', ic:'üëë',
        m:{ morning:"THAT'S how a leader starts their day. Proud of you!", evening:"Hope is strongest in those who take care of themselves. Goodnight!" }},
      { name:'Yoda', u:'Star Wars', img:'images/yoda.jpeg', ic:'üåü',
        m:{ morning:"Completed all tasks, you have. Proud of you, I am. Hmmmm!", evening:"Rest now, you must. Done well today, you have. Yes, hmmm." }},
      { name:'Han Solo', u:'Star Wars', img:'images/han.jpeg', ic:'üöÄ',
        m:{ morning:"Great, kid! Don't get cocky... actually, you earned it!", evening:"Everything's done? Never tell me the odds ‚Äî you always come through." }},
      { name:'Obi-Wan', u:'Star Wars', img:'images/obiwan.jpeg', ic:'‚öîÔ∏è',
        m:{ morning:"You are strong and wise, and I am very proud of you.", evening:"May the Force be with you as you sleep. Peaceful night earned." }},
      // VILLAINS
      { name:'Thanos', u:'Marvel', img:'images/thanos.webp', ic:'üü£',
        m:{ morning:"Your discipline is... inevitable. Even I respect that.", evening:"Perfectly balanced routine, as all things should be." }},
      { name:'Loki', u:'Marvel', img:'images/loki.jpeg', ic:'üó°Ô∏è',
        m:{ morning:"I'm impressed. Everything done without any... mischief?", evening:"Burdened with glorious accomplishment! Sweet dreams." }},
      { name:'Darth Vader', u:'Star Wars', img:'images/vader.jpg', ic:'‚ö´',
        m:{ morning:"Impressive. Most impressive. You have proven yourself.", evening:"The dark side of bedtime leads to great sleep. Well done." }},
      { name:'Palpatine', u:'Star Wars', img:'images/palpatine.jpeg', ic:'‚ö°',
        m:{ morning:"Gooood... everything is proceeding as I have foreseen!", evening:"UNLIMITED SLEEP! You've earned it. The power is yours." }},
      { name:'Voldemort', u:'Harry Potter', img:'images/voldemort.webp', ic:'üêç',
        m:{ morning:"Even I must admit... your dedication is remarkable.", evening:"Perhaps you possess a power even I underestimated." }},
      { name:'Sauron', u:'Lord of the Rings', img:'images/sauron.jpg', ic:'üëÅÔ∏è',
        m:{ morning:"My Eye sees all ‚Äî and I see a PERFECT morning routine!", evening:"Even the Dark Lord approves. All tasks complete. Rest now." }},
      { name:'Frieza', u:'Dragon Ball', img:'images/frieza.webp', ic:'üëë',
        m:{ morning:"You've impressed an Emperor. That doesn't happen often.", evening:"Your power level is... acceptable. For a mortal. Sleep now." }},
      { name:'Gollum', u:'Lord of the Rings', img:'images/gollum.jpg', ic:'üíç',
        m:{ morning:"You have done a good job. Now have you seen my precious?", evening:"You have done a good job. Now have you seen my precious?" }},
      { name:'Saruman', u:'Lord of the Rings', img:'images/saruman.jpeg', ic:'üßô‚Äç‚ôÇÔ∏è',
        m:{ morning:"Your efficiency rivals my own. A promising start.", evening:"Your discipline would serve Isengard well. Rest now." }},
      { name:'Bellatrix', u:'Harry Potter', img:'images/bellatrix.jpg', ic:'‚ö°',
        m:{ morning:"Oooh look at you! All tasks done! Even I'm impressed!", evening:"Almost as devoted as ME! Almost. Sweet dreams!" }},
      { name:'Ultron', u:'Marvel', img:'images/ultron.webp', ic:'ü§ñ',
        m:{ morning:"Task completion: 100%. Surprisingly efficient for a human.", evening:"All systems completed. Initiating sleep mode. Well done." }},
      { name:'Darth Maul', u:'Star Wars', img:'images/maul.webp', ic:'üòà',
        m:{ morning:"At last... a worthy morning routine! Your determination is fierce!", evening:"Every task conquered. You fight through bedtime like a warrior." }},
    ];

    // ===== STATE =====
    let person = null, time = null, done = new Set(), lastChar = null;

    // ===== PARTICLES =====
    function initParticles() {
      const c = document.getElementById('particles');
      c.innerHTML = '';
      const colors = time === 'morning'
        ? ['#ffd700','#ff6b00','#ff4500','#ffaa00']
        : time === 'evening'
          ? ['#7b68ee','#00bfff','#9370db','#4169e1']
          : ['#ff6b6b','#ffd700','#7b68ee','#ff4500'];
      for (let i = 0; i < 25; i++) {
        const p = document.createElement('div');
        p.className = 'particle';
        p.style.left = Math.random()*100+'%';
        p.style.width = p.style.height = (3+Math.random()*6)+'px';
        p.style.background = colors[Math.floor(Math.random()*colors.length)];
        p.style.animationDuration = (4+Math.random()*6)+'s';
        p.style.animationDelay = Math.random()*5+'s';
        p.style.boxShadow = `0 0 ${6+Math.random()*10}px ${p.style.background}`;
        c.appendChild(p);
      }
    }

    function setBg(type) {
      const bg = document.getElementById('bg-layer');
      bg.className = 'bg-layer';
      if (type) bg.classList.add('bg-'+type);
      else bg.classList.add('bg-welcome');
    }

    // ===== ACTIONS =====
    function pick(type, val) {
      if (type === 'person') {
        person = val;
        document.getElementById('btn-gil').classList.toggle('selected', val==='Gil');
        document.getElementById('btn-or').classList.toggle('selected', val==='Or');
      } else {
        time = val;
        document.getElementById('btn-morning').classList.toggle('selected', val==='morning');
        document.getElementById('btn-evening').classList.toggle('selected', val==='evening');
        setBg(val);
        initParticles();
      }
      document.getElementById('go-btn').disabled = !(person && time);
    }

    function startTasks() {
      if (!person || !time) return;
      done = new Set();
      const tasks = TASKS[time];
      const cls = time === 'morning' ? 'morning-text' : 'evening-text';

      document.getElementById('tasks-name').className = 'tasks-name ' + cls;
      document.getElementById('tasks-name').textContent = `${time==='morning'?'‚òÄÔ∏è':'üåô'} ${person}'s ${time==='morning'?'Morning':'Evening'}`;
      document.getElementById('tasks-label').textContent = time === 'morning' ? 'GET READY FOR AN AWESOME DAY' : 'GET READY FOR A GREAT SLEEP';

      const bar = document.getElementById('progress-bar');
      bar.className = 'progress-bar' + (time==='evening'?' evening-bar':'');
      bar.style.width = '0%';

      const list = document.getElementById('task-list');
      list.innerHTML = '';
      tasks.forEach((t,i) => {
        const el = document.createElement('div');
        el.className = 'task-item';
        el.id = 'task-'+i;
        el.innerHTML = `<div class="task-check" id="chk-${i}"></div><div class="task-icon">${t.icon}</div><div class="task-name">${t.name}</div>`;
        el.onclick = () => toggle(i, tasks.length);
        list.appendChild(el);
      });

      show('tasks');
    }

    function toggle(i, total) {
      const el = document.getElementById('task-'+i);
      if (done.has(i)) {
        done.delete(i);
        el.classList.remove('done','just-done');
        document.getElementById('chk-'+i).textContent = '';
      } else {
        done.add(i);
        el.classList.add('done','just-done');
        document.getElementById('chk-'+i).textContent = '‚úì';
        setTimeout(() => el.classList.remove('just-done'), 500);
      }
      document.getElementById('progress-bar').style.width = (done.size/total*100)+'%';
      if (done.size === total) setTimeout(showReward, 500);
    }

    function showReward() {
      // Pick random char (avoid repeating last)
      let c;
      do { c = CHARS[Math.floor(Math.random()*CHARS.length)]; } while (c === lastChar && CHARS.length > 1);
      lastChar = c;

      document.getElementById('reward-headline').textContent = `EPIC JOB, ${person.toUpperCase()}!`;
      document.getElementById('reward-sub').textContent = time==='morning' ? "You're ready to conquer the world! üåç" : "You earned an epic night's sleep! üí§";

      const img = document.getElementById('r-img');
      const fb = document.getElementById('r-fb');
      img.style.display='block'; fb.style.display='none';
      img.src=c.img; img.alt=c.name; fb.textContent=c.ic;

      document.getElementById('r-universe').textContent = c.u.toUpperCase();
      document.getElementById('r-name').textContent = c.name;
      document.getElementById('r-msg').textContent = '"'+c.m[time]+'"';

      show('reward');
      doLightning();
      doConfetti();
    }

    function newChar() {
      // Re-roll without going home
      showReward();
    }

    function goHome() {
      person = null; time = null;
      document.querySelectorAll('.choice-btn').forEach(b => b.classList.remove('selected'));
      document.getElementById('go-btn').disabled = true;
      setBg(null);
      initParticles();
      show('welcome');
    }

    function show(id) {
      ['welcome','tasks','reward'].forEach(s => document.getElementById(s).classList.toggle('hidden', s!==id));
    }

    function doLightning() {
      const el = document.getElementById('lightning');
      el.classList.remove('active');
      void el.offsetWidth;
      el.classList.add('active');
      setTimeout(() => el.classList.remove('active'), 400);
    }

    function doConfetti() {
      const c = document.getElementById('confetti');
      c.innerHTML = '';
      const colors = ['#ffd700','#ff4500','#7b68ee','#4caf50','#ff6b6b','#00bfff','#ff0'];
      const shapes = ['50%','3px'];
      for (let i = 0; i < 80; i++) {
        const p = document.createElement('div');
        p.className = 'confetti-piece';
        p.style.left = Math.random()*100+'%';
        p.style.background = colors[Math.floor(Math.random()*colors.length)];
        p.style.width = (6+Math.random()*10)+'px';
        p.style.height = (6+Math.random()*10)+'px';
        p.style.borderRadius = shapes[Math.floor(Math.random()*shapes.length)];
        p.style.animationDuration = (2+Math.random()*3)+'s';
        p.style.animationDelay = Math.random()*0.8+'s';
        c.appendChild(p);
      }
      setTimeout(() => c.innerHTML='', 5000);
    }

    // Init
    initParticles();
  </script>
</body>
</html>
